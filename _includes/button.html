{% assign variant = include.variant | default: "primary" %}

{% assign base_classes = "relative cursor-pointer isolate inline-flex items-center justify-center gap-2 rounded-lg border text-sm font-medium px-3 py-2 sm:px-4 focus:outline-none focus-visible:ring-2 focus-visible:ring-saints-500 disabled:opacity-50 transition-all duration-200" %}

{% if variant == "secondary" %}
  {% assign variant_classes = "border-stone-950/10 bg-white/60 text-stone-950 hover:bg-stone-950/5 dark:border-white/15 dark:bg-white/5 dark:text-white dark:hover:bg-white/10" %}
{% else %}
  {% assign variant_classes = "border-transparent bg-stone-900 before:absolute before:inset-0 before:-z-10 before:rounded-lg before:bg-stone-900 before:shadow-sm dark:before:hidden dark:border-white/5 after:absolute after:inset-0 after:-z-10 after:rounded-lg after:shadow-[inset_0_1px_theme(colors.white/15%)] hover:after:bg-white/10 dark:after:-inset-px dark:after:rounded-lg text-white dark:bg-stone-600 dark:hover:bg-stone-500" %}
{% endif %}

{% case include.icon %}
  {% when "location" %}
    {% assign icon_svg = '<path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25s-7.5-4.108-7.5-11.25a7.5 7.5 0 1 1 15 0Z"/>' %}
  {% when "location_old" %}
    {% assign icon_svg = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>' %}
  {% when "email" %}
    {% assign icon_svg = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>' %}
  {% when "close" %}
    {% assign icon_svg = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>' %}
  {% when "map" %}
    {% assign icon_svg = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"/>' %}
  {% when "clock" %}
    {% assign icon_svg = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>' %}
{% endcase %}

{% assign all_classes = base_classes | append: " " | append: variant_classes %}
{% if include.class %}
  {% assign all_classes = all_classes | append: " " | append: include.class %}
{% endif %}
{% if include.href %}
  <a href="{{ include.href }}"{% if include.href contains "mailto:" or include.href contains "http" %} target="_blank" rel="noopener"{% endif %} class="{{ all_classes }}">
    {% if include.icon %}
      <svg data-slot="icon" class="size-5 shrink-0 sm:size-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        {{ icon_svg }}
      </svg>
    {% endif %}
    {{ include.text }}
  </a>
{% else %}
  <button type="button"{% if include.command %} command="{{ include.command }}"{% endif %}{% if include.commandfor %} commandfor="{{ include.commandfor }}"{% endif %} class="{{ all_classes }}">
    {% if include.icon %}
      <svg data-slot="icon" class="size-5 shrink-0 sm:size-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        {{ icon_svg }}
      </svg>
    {% endif %}
    {{ include.text }}
  </button>
{% endif %}